"use strict";
var Tetris;
(function (Tetris) {
    var ƒ = FudgeCore;
    class Shape extends ƒ.Node {
        constructor(startPos = ƒ.Vector3.ZERO()) {
            super('Shape');
            this.unit = Shape.staticUnit;
            this.color = ƒ.Color.CSS('WHITE');
            startPos.scale(this.unit);
            this.addComponent(new ƒ.ComponentTransform(ƒ.Matrix4x4.TRANSLATION(startPos)));
            this.container = new ƒ.Node('Shape_Container');
            this.container.addComponent(new ƒ.ComponentTransform(ƒ.Matrix4x4.TRANSLATION(ƒ.Vector3.ZERO())));
            this.appendChild(this.container);
        }
        static random() {
            let r = Math.random();
            let p = 1 / 7;
            let rx = Math.floor(Math.random() * 12) - 6;
            let y = 10;
            const form = new Shape(new ƒ.Vector3(rx, y, 0));
            if (r > p * 6)
                form.createLN();
            else if (r > p * 5)
                form.createLL();
            else if (r > p * 4)
                form.createLR();
            else if (r > p * 3)
                form.createZL();
            else if (r > p * 2)
                form.createZR();
            else if (r > p * 1)
                form.createSQ();
            else if (r > p * 0)
                form.createTT();
            return form;
        }
        static floor(len, pos = ƒ.Vector3.ZERO()) {
            let form = new Shape(pos);
            form.createLine(len, ƒ.Vector3.ZERO());
            return form;
        }
        static wall(len, pos = ƒ.Vector3.ZERO()) {
            let form = new Shape(pos);
            while (len-- > 0)
                form.createQuad(new ƒ.Vector3(0, form.unit * len - form.unit, 0));
            0;
            return form;
        }
        get position() {
            return this.mtxWorld.translation;
        }
        /** Versuche Form um einen Schritt nach unten zu bewegen */
        tryMoveY(colliders) {
            // Kalkuliere Translation um eine Einheit nach unten
            const downMtx = this.mtxLocal.copy;
            downMtx.translateY(-this.unit);
            // speichere Rotation des Form-Containers
            const cRotation = this.container.mtxLocal.rotation.z;
            // Iteriere über jedes Segment einer Form und simuliere eine Translaton nach unten (Weltkoordinatensystem)
            for (const segment of this.container.getChildren()) {
                // Erstelle Matrixkopie des Segments
                const segmentMtx = segment.mtxWorld.copy;
                // Prüfe andhand der Container-Rotation in welche Richtung das Segment bewegt werden muss.
                // Führe daraufhin die Translation durch. (Funktioniert da immer in 90 Grad Schritten gedreht wird :D)
                if (cRotation === 90)
                    segmentMtx.translateX(-this.unit);
                else if (cRotation === -90)
                    segmentMtx.translateX(this.unit);
                else if (cRotation === -180 || cRotation === 180)
                    segmentMtx.translateY(this.unit);
                else
                    segmentMtx.translateY(-this.unit);
                // Prüfe ob die transformierten Segmentkopien mit den Collidern kollidieren
                for (const collider of colliders) {
                    for (const other of collider.container.getChildren()) {
                        const otherTrans = other.mtxWorld.translation;
                        if (!segmentMtx.translation.equals(ƒ.Vector3.ZERO()) &&
                            segmentMtx.translation.isInsideSphere(otherTrans, this.unit / 2)) {
                            // tue nichts, Form ist bereits am Boden
                            return false;
                        }
                    }
                }
            }
            // Wird ausgeführt wenn nicht kollidiert. Führe deshalb eine Translation der Form nach unten aus.
            this.cmpTransform.mtxLocal = downMtx;
            return true;
        }
        moveX(dirX) {
            dirX.scale(this.unit);
            this.mtxLocal?.translate(dirX);
        }
        rotateZ(dir) {
            this.container?.mtxLocal?.rotateZ(dir * 90);
        }
        createLine(len, pos = ƒ.Vector3.ZERO()) {
            while (len-- > 0)
                this.createQuad(new ƒ.Vector3(this.unit * len - this.unit + pos.x, 0 + pos.y, 0 + pos.z));
        }
        createLN() {
            this.color = ƒ.Color.CSS('CYAN');
            this.createLine(4, ƒ.Vector3.ZERO());
        }
        createLL() {
            this.color = ƒ.Color.CSS('MAGENTA');
            this.createLine(3);
            this.createQuad(new ƒ.Vector3(-this.unit, this.unit, 0));
        }
        createLR() {
            this.color = ƒ.Color.CSS('YELLOW');
            this.createLine(3);
            this.createQuad(new ƒ.Vector3(this.unit, this.unit, 0));
        }
        createZL() {
            this.color = ƒ.Color.CSS('RED');
            this.createLine(2, new ƒ.Vector3(this.unit, 0, 0));
            this.createLine(2, new ƒ.Vector3(0, 0 + this.unit, 0));
        }
        createZR() {
            this.color = ƒ.Color.CSS('GREEN');
            this.createLine(2);
            this.createLine(2, new ƒ.Vector3(this.unit, 0 + this.unit, 0));
        }
        createSQ() {
            this.color = ƒ.Color.CSS('BLUE');
            this.createLine(2);
            this.createLine(2, new ƒ.Vector3(0, this.unit, 0));
        }
        createTT() {
            this.color = ƒ.Color.CSS('ORANGE');
            this.createLine(3);
            this.createQuad(new ƒ.Vector3(0, 0 + this.unit, 0));
        }
        createQuad(pos) {
            let mesh = new ƒ.MeshQuad();
            let material = new ƒ.Material('Solid' + this.color.getCSS(), ƒ.ShaderUniColor, new ƒ.CoatColored(this.color));
            let segment = new ƒ.Node('Segment');
            let cmpMesh = new ƒ.ComponentMesh(mesh);
            segment.addComponent(cmpMesh);
            let cmpMaterial = new ƒ.ComponentMaterial(material);
            segment.addComponent(cmpMaterial);
            segment.addComponent(new ƒ.ComponentTransform(ƒ.Matrix4x4.TRANSLATION(pos)));
            this.container.appendChild(segment);
        }
    }
    Shape.staticUnit = 1.05;
    Tetris.Shape = Shape;
})(Tetris || (Tetris = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdGV0cmlzL3NoYXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFVLE1BQU0sQ0FxTWY7QUFyTUQsV0FBVSxNQUFNO0lBQ1osSUFBTyxDQUFDLEdBQUcsU0FBUyxDQUFDO0lBRXJCLE1BQWEsS0FBTSxTQUFRLENBQUMsQ0FBQyxJQUFJO1FBTzdCLFlBQVksV0FBc0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUU7WUFDOUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBTlosU0FBSSxHQUFXLEtBQUssQ0FBQyxVQUFVLENBQUM7WUFFL0IsVUFBSyxHQUFZLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBSzFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzFCLElBQUksQ0FBQyxZQUFZLENBQ2IsSUFBSSxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FDOUQsQ0FBQztZQUNGLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDL0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQ3ZCLElBQUksQ0FBQyxDQUFDLGtCQUFrQixDQUNwQixDQUFDLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQzVDLENBQ0osQ0FBQztZQUNGLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3JDLENBQUM7UUFFTSxNQUFNLENBQUMsTUFBTTtZQUNoQixJQUFJLENBQUMsR0FBVyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDOUIsSUFBSSxD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Q0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQ3pELENBQUM7WUFDRixJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxDQUFDOztJQS9MYSxnQkFBVSxHQUFXLElBQUksQ0FBQztJQUQvQixZQUFLLFFBaU1qQixDQUFBO0FBQ0wsQ0FBQyxFQXJNUyxNQUFNLEtBQU4sTUFBTSxRQXFNZiIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBUZXRyaXMge1xyXG4gICAgaW1wb3J0IMaSID0gRnVkZ2VDb3JlO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTaGFwZSBleHRlbmRzIMaSLk5vZGUge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RhdGljVW5pdDogbnVtYmVyID0gMS4wNTtcclxuICAgICAgICBwdWJsaWMgdW5pdDogbnVtYmVyID0gU2hhcGUuc3RhdGljVW5pdDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb2xvcjogxpIuQ29sb3IgPSDGki5Db2xvci5DU1MoJ1dISVRFJyk7XHJcbiAgICAgICAgcHJpdmF0ZSBjb250YWluZXI6IMaSLk5vZGU7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHN0YXJ0UG9zOiDGki5WZWN0b3IzID0gxpIuVmVjdG9yMy5aRVJPKCkpIHtcclxuICAgICAgICAgICAgc3VwZXIoJ1NoYXBlJyk7XHJcbiAgICAgICAgICAgIHN0YXJ0UG9zLnNjYWxlKHRoaXMudW5pdCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KFxyXG4gICAgICAgICAgICAgICAgbmV3IMaSLkNvbXBvbmVudFRyYW5zZm9ybSjGki5NYXRyaXg0eDQuVFJBTlNMQVRJT04oc3RhcnRQb3MpKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG5ldyDGki5Ob2RlKCdTaGFwZV9Db250YWluZXInKTtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KFxyXG4gICAgICAgICAgICAgICAgbmV3IMaSLkNvbXBvbmVudFRyYW5zZm9ybShcclxuICAgICAgICAgICAgICAgICAgICDGki5NYXRyaXg0eDQuVFJBTlNMQVRJT04oxpIuVmVjdG9yMy5aRVJPKCkpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByYW5kb20oKTogU2hhcGUge1xyXG4gICAgICAgICAgICBsZXQgcjogbnVtYmVyID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICAgICAgbGV0IHA6IG51bWJlciA9IDEgLyA3O1xyXG4gICAgICAgICAgICBsZXQgcng6IG51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEyKSAtIDY7XHJcbiAgICAgICAgICAgIGxldCB5OiBudW1iZXIgPSAxMDtcclxuICAgICAgICAgICAgY29uc3QgZm9ybTogU2hhcGUgPSBuZXcgU2hhcGUobmV3IMaSLlZlY3RvcjMocngsIHksIDApKTtcclxuICAgICAgICAgICAgaWYgKHIgPiBwICogNikgZm9ybS5jcmVhdGVMTigpO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChyID4gcCAqIDUpIGZvcm0uY3JlYXRlTEwoKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAociA+IHAgKiA0KSBmb3JtLmNyZWF0ZUxSKCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHIgPiBwICogMykgZm9ybS5jcmVhdGVaTCgpO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChyID4gcCAqIDIpIGZvcm0uY3JlYXRlWlIoKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAociA+IHAgKiAxKSBmb3JtLmNyZWF0ZVNRKCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHIgPiBwICogMCkgZm9ybS5jcmVhdGVUVCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZm9ybTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZmxvb3IoXHJcbiAgICAgICAgICAgIGxlbjogbnVtYmVyLFxyXG4gICAgICAgICAgICBwb3M6IMaSLlZlY3RvcjMgPSDGki5WZWN0b3IzLlpFUk8oKVxyXG4gICAgICAgICk6IFNoYXBlIHtcclxuICAgICAgICAgICAgbGV0IGZvcm06IFNoYXBlID0gbmV3IFNoYXBlKHBvcyk7XHJcbiAgICAgICAgICAgIGZvcm0uY3JlYXRlTGluZShsZW4sIMaSLlZlY3RvcjMuWkVSTygpKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHdhbGwoXHJcbiAgICAgICAgICAgIGxlbjogbnVtYmVyLFxyXG4gICAgICAgICAgICBwb3M6IMaSLlZlY3RvcjMgPSDGki5WZWN0b3IzLlpFUk8oKVxyXG4gICAgICAgICk6IFNoYXBlIHtcclxuICAgICAgICAgICAgbGV0IGZvcm06IFNoYXBlID0gbmV3IFNoYXBlKHBvcyk7XHJcbiAgICAgICAgICAgIHdoaWxlIChsZW4tLSA+IDApXHJcbiAgICAgICAgICAgICAgICBmb3JtLmNyZWF0ZVF1YWQoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IMaSLlZlY3RvcjMoMCwgZm9ybS51bml0ICogbGVuIC0gZm9ybS51bml0LCAwKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgMDtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0IHBvc2l0aW9uKCk6IMaSLlZlY3RvcjMge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tdHhXb3JsZC50cmFuc2xhdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKiBWZXJzdWNoZSBGb3JtIHVtIGVpbmVuIFNjaHJpdHQgbmFjaCB1bnRlbiB6dSBiZXdlZ2VuICovXHJcbiAgICAgICAgcHVibGljIHRyeU1vdmVZKGNvbGxpZGVyczogU2hhcGVbXSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICAvLyBLYWxrdWxpZXJlIFRyYW5zbGF0aW9uIHVtIGVpbmUgRWluaGVpdCBuYWNoIHVudGVuXHJcbiAgICAgICAgICAgIGNvbnN0IGRvd25NdHggPSB0aGlzLm10eExvY2FsLmNvcHk7XHJcbiAgICAgICAgICAgIGRvd25NdHgudHJhbnNsYXRlWSgtdGhpcy51bml0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNwZWljaGVyZSBSb3RhdGlvbiBkZXMgRm9ybS1Db250YWluZXJzXHJcbiAgICAgICAgICAgIGNvbnN0IGNSb3RhdGlvbjogbnVtYmVyID0gdGhpcy5jb250YWluZXIubXR4TG9jYWwucm90YXRpb24uejtcclxuXHJcbiAgICAgICAgICAgIC8vIEl0ZXJpZXJlIMO8YmVyIGplZGVzIFNlZ21lbnQgZWluZXIgRm9ybSB1bmQgc2ltdWxpZXJlIGVpbmUgVHJhbnNsYXRvbiBuYWNoIHVudGVuIChXZWx0a29vcmRpbmF0ZW5zeXN0ZW0pXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiB0aGlzLmNvbnRhaW5lci5nZXRDaGlsZHJlbigpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFcnN0ZWxsZSBNYXRyaXhrb3BpZSBkZXMgU2VnbWVudHNcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnRNdHggPSBzZWdtZW50Lm10eFdvcmxkLmNvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUHLDvGZlIGFuZGhhbmQgZGVyIENvbnRhaW5lci1Sb3RhdGlvbiBpbiB3ZWxjaGUgUmljaHR1bmcgZGFzIFNlZ21lbnQgYmV3ZWd0IHdlcmRlbiBtdXNzLlxyXG4gICAgICAgICAgICAgICAgLy8gRsO8aHJlIGRhcmF1ZmhpbiBkaWUgVHJhbnNsYXRpb24gZHVyY2guIChGdW5rdGlvbmllcnQgZGEgaW1tZXIgaW4gOTAgR3JhZCBTY2hyaXR0ZW4gZ2VkcmVodCB3aXJkIDpEKVxyXG4gICAgICAgICAgICAgICAgaWYgKGNSb3RhdGlvbiA9PT0gOTApIHNlZ21lbnRNdHgudHJhbnNsYXRlWCgtdGhpcy51bml0KTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNSb3RhdGlvbiA9PT0gLTkwKSBzZWdtZW50TXR4LnRyYW5zbGF0ZVgodGhpcy51bml0KTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNSb3RhdGlvbiA9PT0gLTE4MCB8fCBjUm90YXRpb24gPT09IDE4MClcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50TXR4LnRyYW5zbGF0ZVkodGhpcy51bml0KTtcclxuICAgICAgICAgICAgICAgIGVsc2Ugc2VnbWVudE10eC50cmFuc2xhdGVZKC10aGlzLnVuaXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFByw7xmZSBvYiBkaWUgdHJhbnNmb3JtaWVydGVuIFNlZ21lbnRrb3BpZW4gbWl0IGRlbiBDb2xsaWRlcm4ga29sbGlkaWVyZW5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29sbGlkZXIgb2YgY29sbGlkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvdGhlciBvZiBjb2xsaWRlci5jb250YWluZXIuZ2V0Q2hpbGRyZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdGhlclRyYW5zOiDGki5WZWN0b3IzID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyLm10eFdvcmxkLnRyYW5zbGF0aW9uO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXNlZ21lbnRNdHgudHJhbnNsYXRpb24uZXF1YWxzKMaSLlZlY3RvcjMuWkVSTygpKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudE10eC50cmFuc2xhdGlvbi5pc0luc2lkZVNwaGVyZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdGhlclRyYW5zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5pdCAvIDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0dWUgbmljaHRzLCBGb3JtIGlzdCBiZXJlaXRzIGFtIEJvZGVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gV2lyZCBhdXNnZWbDvGhydCB3ZW5uIG5pY2h0IGtvbGxpZGllcnQuIEbDvGhyZSBkZXNoYWxiIGVpbmUgVHJhbnNsYXRpb24gZGVyIEZvcm0gbmFjaCB1bnRlbiBhdXMuXHJcbiAgICAgICAgICAgIHRoaXMuY21wVHJhbnNmb3JtLm10eExvY2FsID0gZG93bk10eDtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbW92ZVgoZGlyWDogxpIuVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICAgICAgICBkaXJYLnNjYWxlKHRoaXMudW5pdCk7XHJcbiAgICAgICAgICAgIHRoaXMubXR4TG9jYWw/LnRyYW5zbGF0ZShkaXJYKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByb3RhdGVaKGRpcjogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyPy5tdHhMb2NhbD8ucm90YXRlWihkaXIgKiA5MCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNyZWF0ZUxpbmUoXHJcbiAgICAgICAgICAgIGxlbjogbnVtYmVyLFxyXG4gICAgICAgICAgICBwb3M6IMaSLlZlY3RvcjMgPSDGki5WZWN0b3IzLlpFUk8oKVxyXG4gICAgICAgICk6IHZvaWQge1xyXG4gICAgICAgICAgICB3aGlsZSAobGVuLS0gPiAwKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVRdWFkKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyDGki5WZWN0b3IzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuaXQgKiBsZW4gLSB0aGlzLnVuaXQgKyBwb3MueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMCArIHBvcy55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAwICsgcG9zLnpcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVMTigpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IMaSLkNvbG9yLkNTUygnQ1lBTicpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUxpbmUoNCwgxpIuVmVjdG9yMy5aRVJPKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVMTCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IMaSLkNvbG9yLkNTUygnTUFHRU5UQScpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUxpbmUoMyk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUXVhZChuZXcgxpIuVmVjdG9yMygtdGhpcy51bml0LCB0aGlzLnVuaXQsIDApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY3JlYXRlTFIoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSDGki5Db2xvci5DU1MoJ1lFTExPVycpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUxpbmUoMyk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUXVhZChuZXcgxpIuVmVjdG9yMyh0aGlzLnVuaXQsIHRoaXMudW5pdCwgMCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVaTCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IMaSLkNvbG9yLkNTUygnUkVEJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTGluZSgyLCBuZXcgxpIuVmVjdG9yMyh0aGlzLnVuaXQsIDAsIDApKTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVMaW5lKDIsIG5ldyDGki5WZWN0b3IzKDAsIDAgKyB0aGlzLnVuaXQsIDApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY3JlYXRlWlIoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSDGki5Db2xvci5DU1MoJ0dSRUVOJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTGluZSgyKTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVMaW5lKDIsIG5ldyDGki5WZWN0b3IzKHRoaXMudW5pdCwgMCArIHRoaXMudW5pdCwgMCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVTUSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IMaSLkNvbG9yLkNTUygnQkxVRScpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUxpbmUoMik7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTGluZSgyLCBuZXcgxpIuVmVjdG9yMygwLCB0aGlzLnVuaXQsIDApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY3JlYXRlVFQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSDGki5Db2xvci5DU1MoJ09SQU5HRScpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUxpbmUoMyk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUXVhZChuZXcgxpIuVmVjdG9yMygwLCAwICsgdGhpcy51bml0LCAwKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNyZWF0ZVF1YWQocG9zOiDGki5WZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBtZXNoOiDGki5NZXNoUXVhZCA9IG5ldyDGki5NZXNoUXVhZCgpO1xyXG4gICAgICAgICAgICBsZXQgbWF0ZXJpYWw6IMaSLk1hdGVyaWFsID0gbmV3IMaSLk1hdGVyaWFsKFxyXG4gICAgICAgICAgICAgICAgJ1NvbGlkJyArIHRoaXMuY29sb3IuZ2V0Q1NTKCksXHJcbiAgICAgICAgICAgICAgICDGki5TaGFkZXJVbmlDb2xvcixcclxuICAgICAgICAgICAgICAgIG5ldyDGki5Db2F0Q29sb3JlZCh0aGlzLmNvbG9yKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsZXQgc2VnbWVudDogxpIuTm9kZSA9IG5ldyDGki5Ob2RlKCdTZWdtZW50Jyk7XHJcbiAgICAgICAgICAgIGxldCBjbXBNZXNoOiDGki5Db21wb25lbnRNZXNoID0gbmV3IMaSLkNvbXBvbmVudE1lc2gobWVzaCk7XHJcbiAgICAgICAgICAgIHNlZ21lbnQuYWRkQ29tcG9uZW50KGNtcE1lc2gpO1xyXG4gICAgICAgICAgICBsZXQgY21wTWF0ZXJpYWw6IMaSLkNvbXBvbmVudE1hdGVyaWFsID0gbmV3IMaSLkNvbXBvbmVudE1hdGVyaWFsKFxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc2VnbWVudC5hZGRDb21wb25lbnQoY21wTWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICBzZWdtZW50LmFkZENvbXBvbmVudChcclxuICAgICAgICAgICAgICAgIG5ldyDGki5Db21wb25lbnRUcmFuc2Zvcm0oxpIuTWF0cml4NHg0LlRSQU5TTEFUSU9OKHBvcykpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHNlZ21lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=